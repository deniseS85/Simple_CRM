<div class="calendar">
    <div class="calendar-header">
        <button (click)="today()" class="today-button">Today</button>
        <div class="calendar-title">
            <mat-icon (click)="previousWeek()">arrow_forward_ios</mat-icon>
            <h2>{{ currentWeek.start | date:'dd.MM.yyyy' }} - {{ currentWeek.end | date:'dd.MM.yyyy' }}</h2>
            <mat-icon (click)="nextWeek()">arrow_forward_ios</mat-icon>
        </div>
    </div>

    <table class="calendar-table">
        <tr class="table-header">
          <th></th>
          <th *ngFor="let day of daysOfWeek">
            {{ day | date:'E, dd.MM' }}
          </th>
        </tr>
        <ng-container *ngFor="let hour of hours; let row = index">
          <tr>
            <td class="time-column">{{ hour }}</td>
            <ng-container *ngFor="let day of daysOfWeek; let column = index">
              <td id="{{row}} {{column}}"
                class="day-column" [class.today]="isToday(day)" 
                (click)="openEventDialog(day, hour, $event, row, column)" 
                [attr.rowspan]="getMaxRowspan(day, hour)">
                <div *ngFor="let event of getVisibleEvents(day, hour)"
                  [ngClass]="['categoryColor', getTreatmentCategoryClass(event.treatment)]" 
                  [style.height.px]="getRowspan(event.treatment) * 58">
                 {{ event.hour }} - {{ calculateEndTime(event.hour, event.treatment.duration) }}<br>{{ event.name }}<br>{{ event.treatment.name }}
                </div>
              </td>
            </ng-container>
          </tr>
        </ng-container>
    </table> 
</div>



   
    


   